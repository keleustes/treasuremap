---
apiVersion: armada.airshipit.org/v1alpha1
kind: ArmadaChart
metadata:
  labels:
    name: podsecuritypolicy-global
  layeringDefinition:
    abstract: false
    layer: global
  name: podsecuritypolicy
  substitutions:
  - dest:
      path: .source
    src:
      kind: PeglegSoftwareVersions
      name: software-versions
      path: .charts.osh_infra.podsecuritypolicy
spec:
  chart_name: podsecuritypolicy
  dependencies:
  - osh-infra-helm-toolkit
  install:
    no_hooks: true
  namespace: ucp
  release: podsecuritypolicy
  upgrade:
    no_hooks: true
  values:
    conf:
      defaults:
        authenticated: psp-default
        serviceaccounts: psp-default
        unauthenticated: nil
    data:
      psp-default:
        allowPrivilegeEscalation: true
        allowedCapabilities:
        - '*'
        fsGroup:
          rule: RunAsAny
        hostIPC: true
        hostNetwork: true
        hostPID: true
        hostPorts:
        - max: 65536
          min: 1
        privileged: true
        runAsUser:
          rule: RunAsAny
        seLinux:
          rule: RunAsAny
        supplementalGroups:
          rule: RunAsAny
        volumes:
        - '*'
  wait:
    resources: []
