---
# The purpose of this file is to define the environment-specific public-facing
# VIP for the ingress controller
apiVersion: armada.airshipit.org/v1alpha1
kind: ArmadaChart
metadata:
  name: ingress-kube-system
  layeringDefinition:
    abstract: false
    layer: site
    parentSelector:
      ingress: kube-system
    actions:
      - method: merge
        path: .
  substitutions:
    - src:
        kind: PeglegCommonAddresses
        name: common-addresses
        path: .vip.ingress_vip
      dest:
        path: .values.network.vip.addr
spec:
  values:
    network:
      ingress:
        disable-ipv6: "true"
      vip:
        manage: true
...
